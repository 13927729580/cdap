#!/usr/bin/env bash

usage="Usage: flow-monitor-start"

# if no args specified, show usage
if [ $# != 0 ]; then
 echo $usage
 exit 1
fi

bin=`dirname "${BASH_SOURCE-$0}"`
bin=`cd "$bin">/dev/null; pwd`
conf="$bin/../conf/"

# Work out java location so can print version into log
if [ "$JAVA_HOME" != "" ]; then
  JAVA_HOME=$JAVA_HOME
fi

if [ "$JAVA_HOME" = "" ]; then
  JAVA=/usr/bin/java
else
  JAVA=${JAVA_HOME}/bin/java
fi

# Set default scheduling priority
if [ "$FLOW_NICENESS" = "" ]; then
  export FLOW_NICENESS=0
fi

CLASSPATH=`"$bin"/classpath`; export CLASSPATH
CLASSPATH=$CLASSPATH:$conf
$JAVA -cp ${CLASSPATH} com.continuuity.runtime.FlowMonitorMain &
