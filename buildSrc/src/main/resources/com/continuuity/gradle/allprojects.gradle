// The contents of this file applies to all project.
apply plugin: 'idea'

defaultTasks 'build'

group = 'com.continuuity'

void setDefault (String name, Object value)
{
    if(!project.hasProperty (name))
    {
        project.ext.set(name, value);
    }
}

if (version == null || version.isEmpty() || version == 'unspecified')
{
    version = '1.2.2-SNAPSHOT'
}
setDefault('groupId', 'com.continuuity')
setDefault('artifactId', projectDir.name)
setDefault('artifactoryUsername', 'gradle');
setDefault('artifactoryPassword', '{DESede}Rk/0rTcxzWomG91yhihmswrLqVnA6oIy');
setDefault('useMavenLocal', 'true');

/// Define artifact repositories.
repositories {
    if (Boolean.valueOf(useMavenLocal))
    {
        mavenLocal()
    }
    maven {
        credentials {
            username artifactoryUsername
            password artifactoryPassword
        }
        url "http://repository.continuuity.com:8081/artifactory/continuuity-gradle-local/"
    }
    maven {
        credentials {
            username artifactoryUsername
            password artifactoryPassword
        }
        url "http://repository.continuuity.com:8081/artifactory/libs-snapshot"
    }
    maven {
        credentials {
            username artifactoryUsername
            password artifactoryPassword
        }
        url "http://repository.continuuity.com:8081/artifactory/libs-release"
    }
}

configurations.all {
    resolutionStrategy.cacheChangingModulesFor 0, 'minutes'
}
