// Configures sonar for monitoring code metrics.

apply plugin: 'sonar'

/// Configure sonar settings.
sonar {
    server {
        url = "https://sonar.continuuity.com"
    }
    database {
        url = "jdbc:mysql://sonar.continuuity.com/sonar"
        driverClassName = "com.mysql.jdbc.Driver"
        username = "sonar"
        password = "09u0ru2039ur203r9u"
    }
    withGlobalProperties { props ->
        props["sonar.projectName"] = projectName
        props["sonar.projectKey"] = projectKey
    }
}

sonarAnalyze {
    group = 'Report'
    description = 'Uploads code metrics to https://sonar.continuuity.com'
}

/// Define common subproject config and tasks.
subprojects
{
    sonar {
        project {
            cloverReportPath = file("$reporting.baseDir/clover/clover.xml")
        }
    }
}
