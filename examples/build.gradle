apply plugin: 'java'

task examplesClean << {
    runMaven("clean")
}

task examplesCompile << {
  runMaven("compile")
}

task examplesJar << {
    runMaven("package")
}

examplesCompile.dependsOn ':singlenode:createApiJar'
examplesJar.dependsOn ':singlenode:createApiJar'

build.dependsOn 'examplesJar'
clean.dependsOn 'examplesClean'

def runMaven(cmd) {
    def mvnCmd = "mvn -f examples/pom.xml " + cmd
    println "Executing command - " + mvnCmd
    def proc = mvnCmd.execute()
    proc.in.eachLine {line -> println line}
    proc.err.eachLine {line -> println 'ERROR: ' + line}
    proc.waitFor()
}

