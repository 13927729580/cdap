import com.continuuity.gradle.GitRepo;

apply plugin: 'continuuity'

task gitCheckout {
    group = 'Git'
    description = 'Checkout the specified branch.'
    doLast {
        for (g in gitRepos) {
            g.checkout();
        }
    }
}

task gitPull  {
    group = 'Git'
    description = 'Pulls the latest commits for all git repos.'
    doLast {
        for (g in gitRepos) {
            g.pull();
        }
    }
}

task gitUpdate  {
    group = 'Git'
    description = 'Performs a clone, checkout, and pull on all repositories.'
    doLast {
        for (g in gitRepos) {
            g.load();
            g.checkout();
            g.pull();
        }
    }
}

task gitStatus  {
    group = 'Git'
    description = 'Checks the status of all git repos'
    doLast {
        for (g in gitRepos) {
            g.status();
        }
    }
}

subprojects {
    task syncGradles {
        group = 'Continuuity'
        description = 'Synchronizes changes to coninuuity.gradle across all sub repositories.'
        doLast {
            copy {
                from "$rootDir/buildSrc/src/main/resources/com/continuuity/gradle/continuuity.gradle"
                into projectDir
            }
        }
    }
}




