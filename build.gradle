apply plugin: 'java'

/**
 * Building of API jar
 */
smartyFacts {
  api {
    enableJavadoc()
    enableSourceJar()
  }
}

/**
 * Specify all the dependencies
 */
dependencies {
  // Dependencies for API
  apiCompile elastic([group: 'com.continuuity', name: 'data-fabric', classifier: 'api', version: "${version}", changing: true],"data-fabric")

  // Dependencies
  compile libraries.google_gson
  compile libraries.google_guice
  compile libraries.google_guice_assistedinject
  compile libraries.google_guice_multibindings
  compile libraries.google_guava

  // Test
  testCompile group: 'junit', name: 'junit', version: '4.10'
}

/**
 * Includes API output to main and test source sets.
 */
sourceSets {
  main {
    compileClasspath += api.output
    runtimeClasspath += api.output
  }
  test {
    compileClasspath += api.output
    runtimeClasspath += api.output
  }
}

/**
 * Generates API javadoc.
 */
javadoc {
  classpath += sourceSets.api.output
}

/**
 * Excludes stubs from clover.
 */
clover {
  excludes << '**/manager/stubs/*'
}

/**
 * Excludes stubs from sonar report exclusion.
 */
sonar {
  project {
    sourceExclusions = '**/manager/stubs/*'
  }
}
