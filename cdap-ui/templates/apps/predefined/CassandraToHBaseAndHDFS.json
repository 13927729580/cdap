{
  "artifact": {
    "name": "cdap-etl-batch",
    "scope": "SYSTEM",
    "version": "3.2.0-SNAPSHOT"
  },
  "config": {
    "source": {
      "name": "Cassandra",
      "label": "Cassandra",
      "properties": {
        "schema": "{\"type\":\"record\",\"name\":\"etlSchemaBody\",\"fields\":[{\"name\":\"fname\",\"type\":\"string\"},{\"name\":\"lname\",\"type\":\"string\"},{\"name\":\"address\",\"type\":\"string\"},{\"name\":\"city\",\"type\":\"string\"},{\"name\":\"state\",\"type\":\"string\"},{\"name\":\"country\",\"type\":\"string\"},{\"name\":\"zipcode\",\"type\":\"int\"}]}",
        "port": "9160",
        "query": "select * from demo.contacts where token(fname) > ? and token(fname) <= ?",
        "keyspace": "demo",
        "initialAddress": "localhost",
        "columnFamily": "contacts",
        "partitioner": "org.apache.cassandra.dht.Murmur3Partitioner"
      }
    },
    "sinks": [
      {
        "name": "TPFSAvro",
        "label": "TPFSAvro",
        "properties": {
          "schema": "{\"type\":\"record\",\"name\":\"etlSchemaBody\",\"fields\":[{\"name\":\"fname\",\"type\":\"string\"},{\"name\":\"lname\",\"type\":\"string\"},{\"name\":\"address\",\"type\":\"string\"},{\"name\":\"city\",\"type\":\"string\"},{\"name\":\"state\",\"type\":\"string\"},{\"name\":\"country\",\"type\":\"string\"},{\"name\":\"zipcode\",\"type\":\"int\"}]}",
          "name": "contacts_hdfs"
        }
      },
      {
        "name": "Table",
        "label": "Table",
        "properties": {
          "schema": "{\"type\":\"record\",\"name\":\"etlSchemaBody\",\"fields\":[{\"name\":\"fname\",\"type\":\"string\"},{\"name\":\"lname\",\"type\":\"string\"},{\"name\":\"address\",\"type\":\"string\"},{\"name\":\"city\",\"type\":\"string\"},{\"name\":\"state\",\"type\":\"string\"},{\"name\":\"country\",\"type\":\"string\"},{\"name\":\"zipcode\",\"type\":\"int\"},{\"name\":\"key\",\"type\":\"string\"}]}",
          "name": "contacts_hbase",
          "schema.row.field": "key"
        }
      }
    ],
    "transforms": [
      {
        "name": "Script",
        "label": "Script",
        "properties": {
          "schema": "{\"type\":\"record\",\"name\":\"etlSchemaBody\",\"fields\":[{\"name\":\"fname\",\"type\":\"string\"},{\"name\":\"lname\",\"type\":\"string\"},{\"name\":\"address\",\"type\":\"string\"},{\"name\":\"city\",\"type\":\"string\"},{\"name\":\"state\",\"type\":\"string\"},{\"name\":\"country\",\"type\":\"string\"},{\"name\":\"zipcode\",\"type\":\"int\"},{\"name\":\"key\",\"type\":\"string\"}]}",
          "script": "function transform(input) {\n  input.key = input.fname+input.lname+input.zipcode;\n  return input;\n}"
        }
      }
    ],
    "schedule": "* * * * *"
  },
  "description": "Batch Extract-Transform-Load (ETL) Template"
}
